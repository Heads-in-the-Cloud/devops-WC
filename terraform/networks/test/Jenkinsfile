pipeline {
    agent any
    tools {
        go '1.18'
    }
    stages{
        stage('test'){
            steps{
                dir("terraform/networks/test") {
                    sh 'go version'
                    sh 'go mod tidy'
                    sh 'go test networks_test.go -v -timeout 10m'
                }
            }
            post{
                failure{
                    'test failed'
                }
            }
        }
    }
}