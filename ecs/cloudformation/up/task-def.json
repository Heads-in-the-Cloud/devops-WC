{
    "networkMode": "awsvpc",
	"family": "users-api",
    "requiresCompatibilities": ["FARGATE"],
	"taskRoleArn": "arn:aws:iam::026390315914:role/WC-ecs-task-iam-role",
	"executionRoleArn": "arn:aws:iam::026390315914::role/ecsTaskExecutionRole",
    "cpu": "1vCPU",
    "memory": "2GB",
	"containerDefinitions": [
		{
			"essential": true,
			"image": "906394416424.dkr.ecr.us-east-1.amazonaws.com/aws-for-fluent-bit:stable",
			"name": "log_router",
			"firelensConfiguration": {
				"type": "fluentbit",
				"options": {
					"config-file-type": "s3",
					"config-file-value": "arn:aws:s3:::utopia-bucket-wc/ecs-logstash.conf"
				}
			},
			"logConfiguration": {
				"logDriver": "awslogs",
				"options": {
					"awslogs-group": "/ecs/wc-logs/dev",
					"awslogs-region": "us-east-2",
					"awslogs-create-group": "true",
					"awslogs-stream-prefix": "firelens"
				}
			},
			"memoryReservation": 50
		 },
		 {
			 "essential": true,
			 "image": "026390315914.dkr.ecr.us-west-2.amazonaws.com/wc-users-api",
			 "name": "app",
             "portMappings": [ {"containerPort" : 5000 }],
             "environment": [
                 { "name": "USERS_PORT",
                    "value": "5000"},
                 { "name": "DB_HOST",
                    "value": "database-wc.cfld1kyecklc.us-west-2.rds.amazonaws.com"},
                 { "name": "DB_USER",
                    "value": "wc_db_admin"},
                 { "name": "DB_USER_PASSWORD",
                    "value": "IqgEyjQQXdo8EQro"},
                 { "name": "SECRET_KEY",
                    "value": "VEws6cqm3BOVCOqZ"}
             ],
			 "logConfiguration": {
				 "logDriver":"awsfirelens"
			},
			"memoryReservation": 100
		}
	],
	"volumes" : [
		{
			"name" : "var-log"
		}
    ]
}